# üé´ Lampu Check-In App

PWA –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Å QR —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –≤ Cloudflare Pages

### 1. –§–æ—Ä–∫–Ω–∏—Ç–µ –∏–ª–∏ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

### 2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ Cloudflare Pages

1. [Cloudflare Dashboard](https://dash.cloudflare.com) ‚Üí **Pages**
2. **Create a project** ‚Üí **Connect to Git**
3. –í—ã–±–µ—Ä–∏—Ç–µ —ç—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. **Build settings:**
   - Build command: *(–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)*
   - Build output directory: `/`
5. **Save and Deploy**

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Environment Variables

**Settings ‚Üí Environment variables:**

| Variable | Value | –ì–¥–µ –≤–∑—è—Ç—å |
|----------|-------|-----------|
| `SUPABASE_URL` | `https://xxx.supabase.co` | Supabase ‚Üí Settings ‚Üí API ‚Üí Project URL |
| `SUPABASE_SERVICE_KEY` | `eyJhbGc...` | Supabase ‚Üí Settings ‚Üí API ‚Üí **service_role** key |

‚ö†Ô∏è **–í–ê–ñ–ù–û:** 
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **service_role** key (–ù–ï anon!)
- Service role –æ–±—Ö–æ–¥–∏—Ç RLS –∏ –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø
- –≠—Ç–æ—Ç –∫–ª—é—á –ë–ï–ó–û–ü–ê–°–ï–ù —Ç.–∫. —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Functions)
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä

‚ö†Ô∏è **–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:** Deployments ‚Üí **Retry deployment**

### 4. –ì–æ—Ç–æ–≤–æ!

–û—Ç–∫—Ä–æ–π—Ç–µ: `https://your-project.pages.dev`

## üì± –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ Android

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Chrome
2. Menu (‚ãÆ) ‚Üí **Add to Home screen**
3. –ì–æ—Ç–æ–≤–æ! –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ Functions

–û—Ç–∫—Ä–æ–π—Ç–µ: `https://your-project.pages.dev/test`

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: `{"message": "Functions —Ä–∞–±–æ—Ç–∞—é—Ç!"}`

## üêõ –û—Ç–ª–∞–¥–∫–∞ "–ö–≤–æ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Chrome
2. –ù–∞–∂–º–∏—Ç–µ F12 (DevTools)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Console**
4. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥
5. –í –∫–æ–Ω—Å–æ–ª–∏ —É–≤–∏–¥–∏—Ç–µ:
   ```
   === QR CODE SCANNED ===
   Raw QR data: [—á—Ç–æ –≤ QR –∫–æ–¥–µ]
   Final Entry ID: [–∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π ID]
   ```

6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **Functions ‚Üí Invocation logs** –≤ Cloudflare:
   ```
   Received Entry ID: [—á—Ç–æ –ø—Ä–∏—à–ª–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä]
   Querying Supabase: [–∫–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å]
   Supabase returned records: [—Å–∫–æ–ª—å–∫–æ –Ω–∞–π–¥–µ–Ω–æ]
   ```

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

**–ü—Ä–æ–±–ª–µ–º–∞:** "–ö–≤–æ—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
- QR –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
- Entry ID –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å USER_ID –≤ –±–∞–∑–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —á—Ç–æ –∏–º–µ–Ω–Ω–æ –∏—â–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** "Configuration error"
- Environment Variables –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- –ù–µ —Å–¥–µ–ª–∞–Ω Redeploy –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ index.html              # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ PWA
‚îú‚îÄ‚îÄ manifest.json           # PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç
‚îú‚îÄ‚îÄ sw.js                   # Service Worker (–æ—Ñ–ª–∞–π–Ω –∫—ç—à)
‚îú‚îÄ‚îÄ wrangler.toml           # Cloudflare –∫–æ–Ω—Ñ–∏–≥
‚îî‚îÄ‚îÄ functions/              # API Functions (—Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥)
    ‚îú‚îÄ‚îÄ test.js             # –¢–µ—Å—Ç: GET /test
    ‚îî‚îÄ‚îÄ api/
        ‚îú‚îÄ‚îÄ stats.js        # GET /api/stats
        ‚îú‚îÄ‚îÄ quota/
        ‚îÇ   ‚îî‚îÄ‚îÄ [id].js     # GET /api/quota/:id
        ‚îî‚îÄ‚îÄ checkin/
            ‚îî‚îÄ‚îÄ [code].js   # PATCH /api/checkin/:code
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ –°–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Environment Variables  
‚úÖ API –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ Functions (—Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥)  
‚úÖ –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –≤–∏–¥–∏—Ç –∫–ª—é—á–∏ Supabase

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ QR –∫–æ–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Ö–æ–¥–∞ (CheckIn)
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º

## üìä –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–¢–∞–±–ª–∏—Ü–∞ **QUOTAS** –≤ Supabase:

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| USER_ID | text | Entry ID —É—á–∞—Å—Ç–Ω–∏–∫–∞ (–¥–ª—è QR –∫–æ–¥–æ–≤) |
| CODE | text | –ö–æ–¥ –∫–≤–æ—Ç—ã |
| CAMP | text | –ù–∞–∑–≤–∞–Ω–∏–µ –∫–µ–º–ø–∞ |
| NAME | text | –ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞ |
| STATUS | text | –°—Ç–∞—Ç—É—Å (Free / CheckIn) |

## üìù –§–æ—Ä–º–∞—Ç QR –∫–æ–¥–∞

QR –∫–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
- –ù–∞–ø—Ä—è–º—É—é Entry ID: `id0001`
- –ò–ª–∏ URL: `https://example.com?id=id0001`

---

Made with üíú for Lampu: Kontak
